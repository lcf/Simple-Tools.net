To find explanations to this "PHP4-spaghetti-like-looking" code please read this post in my blog:

http://blog.lcf.name/2011/06/simple-toolsnet.html